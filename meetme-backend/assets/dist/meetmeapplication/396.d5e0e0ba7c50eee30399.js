(self.webpackChunkmeetmeapplication=self.webpackChunkmeetmeapplication||[]).push([[396],{8396:(e,t,a)=>{"use strict";a.r(t),a.d(t,{BookingModule:()=>J});var i=a(3679),o=a(7716),n=a(7001),r=a(8505),l=a(5366),s=a(8295),d=a(9983),u=a(8583),m=a(7441),c=a(2458);function p(e,t){if(1&e&&(o.TgZ(0,"mat-error"),o._uU(1),o.qZA()),2&e){const e=o.oxw();o.xp6(1),o.Oqu(e.getErrorMessage())}}function v(e,t){if(1&e&&(o.TgZ(0,"mat-option",14),o._uU(1),o.qZA()),2&e){const e=t.$implicit;o.Q6J("value",e),o.xp6(1),o.hij(" ",e," ")}}function h(e,t){1&e&&(o.TgZ(0,"mat-error"),o._uU(1,"Please choose a Convenor to proceed"),o.qZA())}function g(e,t){if(1&e&&(o.TgZ(0,"div",5),o.TgZ(1,"mat-form-field",6),o.TgZ(2,"mat-label"),o._uU(3,"Choose the Available Convenor to schedule meet"),o.qZA(),o.TgZ(4,"mat-select",12),o.YNc(5,v,2,2,"mat-option",13),o.qZA(),o.YNc(6,h,2,0,"mat-error",8),o.qZA(),o.qZA()),2&e){const e=o.oxw();o.xp6(4),o.Q6J("formControl",e.convenor),o.xp6(1),o.Q6J("ngForOf",null==e.appdata.availableorganisers?null:e.appdata.availableorganisers.value),o.xp6(1),o.Q6J("ngIf",e.convenor.hasError("required"))}}function f(e,t){if(1&e&&(o.TgZ(0,"mat-option",14),o._uU(1),o.qZA()),2&e){const e=t.$implicit;o.Q6J("value",null==e?null:e.date),o.xp6(1),o.hij(" ",e.date," ")}}function Z(e,t){1&e&&(o.TgZ(0,"mat-error"),o._uU(1,"Please choose a date to proceed"),o.qZA())}function A(e,t){if(1&e&&(o.TgZ(0,"div",5),o.TgZ(1,"mat-form-field",6),o.TgZ(2,"mat-label"),o._uU(3,"Choose your Preffered date*"),o.qZA(),o.TgZ(4,"mat-select",12),o.YNc(5,f,2,2,"mat-option",13),o.qZA(),o.YNc(6,Z,2,0,"mat-error",8),o.qZA(),o.qZA()),2&e){const e=o.oxw();o.xp6(4),o.Q6J("formControl",e.date),o.xp6(1),o.Q6J("ngForOf",e.getAvailbleDates(null==e.appdata.availabledates?null:e.appdata.availabledates.value)),o.xp6(1),o.Q6J("ngIf",e.date.hasError("required"))}}function b(e,t){if(1&e&&(o.TgZ(0,"mat-option",14),o._uU(1),o.qZA()),2&e){const e=t.$implicit;o.Q6J("value",e.starttime+" "+e.endtime+" "+e.meetid+" "+e.cname+" "+e.convenor),o.xp6(1),o.AsE(" ",e.starttime," - ",e.endtime," ")}}function q(e,t){1&e&&(o.TgZ(0,"mat-error"),o._uU(1,"Please choose a time slot to proceed "),o.qZA())}function x(e,t){if(1&e&&(o.TgZ(0,"div",5),o.TgZ(1,"mat-form-field",6),o.TgZ(2,"mat-label"),o._uU(3,"Choose your Preffered time Slot*"),o.qZA(),o.TgZ(4,"mat-select",12),o.YNc(5,b,2,3,"mat-option",13),o.qZA(),o.YNc(6,q,2,0,"mat-error",8),o.qZA(),o.qZA()),2&e){const e=o.oxw();o.xp6(4),o.Q6J("formControl",e.time),o.xp6(1),o.Q6J("ngForOf",e.getAvailableTimeSlots(null==e.appdata.availabletimeslots?null:e.appdata.availabletimeslots.value)),o.xp6(1),o.Q6J("ngIf",e.time.hasError("required"))}}let T=(()=>{class e{constructor(e,t,a){this.snackbar=e,this.auth=t,this.appdata=a,this.email=new i.NI("",[i.kI.required,i.kI.email]),this.isattedeevalid=!1,this.convenor=new i.NI("",[i.kI.required]),this.date=new i.NI("",[i.kI.required]),this.time=new i.NI("",[i.kI.required]),this.isFormFilled=!1}ngOnInit(){}Submit(){var e,t,a;if(this.email.markAsTouched(),this.email.valid){let e=this.email.value.trim();0==this.isFormFilled&&this.auth.Validateattendee({email:e}).subscribe(e=>{if(1==e.isattendeefound){let t=new Array,a=new Array,i=new Array;this.email.disable(),e.attendee.forEach(e=>{-1==t.indexOf(e.convenor)&&t.push(e.convenor),-1==i.indexOf(e.date)&&(i.push(e.date),a.push({convenor:e.convenor,date:e.date}))}),this.appdata.availableorganisers.next(t),this.appdata.availabletimeslots.next(e.attendee),this.appdata.availabledates.next(a),this.isattedeevalid=!0,this.isFormFilled=!0}0==e.isattendeefound&&(this.isattedeevalid=!1,this.snackbar.open(e.message,"",{horizontalPosition:"center",verticalPosition:"top",duration:5e3,panelClass:["warning-snackbar"]}))})}if(1==this.isFormFilled)if(this.date.invalid||this.time.invalid)this.date.markAsTouched(),this.time.markAsTouched(),this.snackbar.open("Please fill all the required columns to proceed","",{horizontalPosition:"center",verticalPosition:"top",duration:5e3,panelClass:["warning-snackbar"]});else{let i={},o=null===(e=this.time)||void 0===e?void 0:e.value.split(" "),n=null===(t=this.date)||void 0===t?void 0:t.value.split("/"),r=new Date(n[1]+"/"+n[0]+"/"+n[2]+" "+o[0]),l=new Date(n[1]+"/"+n[0]+"/"+n[2]+" "+o[2]);i={email:null===(a=this.email)||void 0===a?void 0:a.value.trim(),stime:r,etime:l,meetid:o[4],convenorname:o[5],convenoremail:o[6]},this.auth.BookSlot(i).subscribe(e=>{this.snackbar.open(e.message,"",{horizontalPosition:"center",verticalPosition:"top",duration:5e3,panelClass:["success-snackbar"]}),location.reload()})}}getErrorMessage(){return this.email.hasError("required")?"You must enter a value":this.email.hasError("email")?"Not a valid email":""}getAvailbleDates(e=new Array){return e.filter(e=>{var t;return e.convenor==(null===(t=this.convenor)||void 0===t?void 0:t.value)})}getAvailableTimeSlots(e=new Array){return e.filter(e=>{var t,a;return e.convenor==(null===(t=this.convenor)||void 0===t?void 0:t.value)&&e.date==(null===(a=this.date)||void 0===a?void 0:a.value)})}}return e.\u0275fac=function(t){return new(t||e)(o.Y36(n.ux),o.Y36(r.O),o.Y36(l.j))},e.\u0275cmp=o.Xpm({type:e,selectors:[["app-attendee-booking"]],decls:18,vars:5,consts:[[1,"card","z-index-0"],[1,"card-header","text-center","pt-4"],["src","../../assets/images/meetmelogo.png","width","200px","height","200px",2,"margin-top","-20px","margin-bottom","-40px"],[1,"card-body"],["role","form text-left","autocomplete","on"],[2,"margin-left","3.5rem"],["appearance","outline"],["matInput","","placeholder","a@example.com","required","",3,"formControl"],[4,"ngIf"],["style","margin-left: 3.5rem;",4,"ngIf"],[1,"text-center"],["value","Submit",1,"btn","bg-gradient-dark","my-4","mb-2",2,"width","60%",3,"click"],[3,"formControl"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(o.TgZ(0,"div",0),o.TgZ(1,"div",1),o.TgZ(2,"h5"),o._uU(3,"Booking"),o.qZA(),o._UZ(4,"img",2),o.qZA(),o.TgZ(5,"div",3),o.TgZ(6,"form",4),o.TgZ(7,"div",5),o.TgZ(8,"mat-form-field",6),o.TgZ(9,"mat-label"),o._uU(10,"Enter your email"),o.qZA(),o._UZ(11,"input",7),o.YNc(12,p,2,1,"mat-error",8),o.qZA(),o.qZA(),o.YNc(13,g,7,3,"div",9),o.YNc(14,A,7,3,"div",9),o.YNc(15,x,7,3,"div",9),o.TgZ(16,"div",10),o.TgZ(17,"input",11),o.NdJ("click",function(){return t.Submit()}),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&e&&(o.xp6(11),o.Q6J("formControl",t.email),o.xp6(1),o.Q6J("ngIf",t.email.invalid),o.xp6(1),o.Q6J("ngIf",t.isattedeevalid),o.xp6(1),o.Q6J("ngIf",t.isattedeevalid&&""!=(null==t.convenor?null:t.convenor.value)),o.xp6(1),o.Q6J("ngIf",t.isattedeevalid&&""!=(null==t.convenor?null:t.convenor.value)))},directives:[i._Y,i.JL,i.F,s.KE,s.hX,d.Nt,i.Fj,i.Q7,i.JJ,i.oH,u.O5,s.TO,m.gD,u.sg,c.ey],styles:[""]}),e})();var k=a(4655);const w=[{path:"",component:T,data:{title:"Booking"},outlet:"auth"}];let J=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.oAB({type:e}),e.\u0275inj=o.cJS({providers:[],imports:[[k.Bz.forChild(w),u.ez]]}),e})()}}]);